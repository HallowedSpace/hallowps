<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex, nofollow">
    <title>Password Protected Page</title>
    <style>
        html, body {
            margin: 0;
            width: 100%;
            height: 100%;
            font-family: Arial, Helvetica, sans-serif;
        }
        #dialogText {
            color: white;
            background-color: #333333;
        }
        
        #dialogWrap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: table;
            background-color: #EEEEEE;
        }
        
        #dialogWrapCell {
            display: table-cell;
            text-align: center;
            vertical-align: middle;
        }
        
        #mainDialog {
            max-width: 400px;
            margin: 5px;
            border: solid #AAAAAA 1px;
            border-radius: 10px;
            box-shadow: 3px 3px 5px 3px #AAAAAA;
            margin-left: auto;
            margin-right: auto;
            background-color: #FFFFFF;
            overflow: hidden;
            text-align: left;
        }
        #mainDialog > * {
            padding: 10px 30px;
        }
        #passArea {
            padding: 20px 30px;
            background-color: white;
        }
        #passArea > * {
            margin: 5px auto;
        }
        #pass {
            width: 100%;
            height: 40px;
            font-size: 30px;
        }
        
        #messageWrapper {
            float: left;
            vertical-align: middle;
            line-height: 30px;
        }
        
        .notifyText {
            display: none;
        }
        
        #invalidPass {
            color: red;
        }
        
        #success {
            color: green;
        }
        
        #submitPass {
            font-size: 20px;
            border-radius: 5px;
            background-color: #E7E7E7;
            border: solid gray 1px;
            float: right;
            cursor: pointer;
        }
        #contentFrame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        #attribution {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            text-align: center;
            padding: 10px;
            font-weight: bold;
            font-size: 0.8em;
        }
        #attribution, #attribution a {
            color: #999;
        }
        .error {
            display: none;
            color: red;
        }
    </style>
  </head>
  <body>
    <iframe id="contentFrame" frameBorder="0" allowfullscreen></iframe>
    <div id="dialogWrap">
        <div id="dialogWrapCell">
            <div id="mainDialog">
                <div id="dialogText">This page is password protected.</div>
                <div id="passArea">
                    <p id="passwordPrompt">Password</p>
                    <input id="pass" type="password" name="pass" autofocus>
                    <div>
                        <span id="messageWrapper">
                            <span id="invalidPass" class="error">Sorry, please try again.</span>
                            <span id="trycatcherror" class="error">Sorry, something went wrong.</span>
                            <span id="success" class="notifyText">Success!</span>
                            &nbsp;
                        </span>
                        <button id="submitPass" type="button">Submit</button>
                        <div style="clear: both;"></div>
                    </div>
                </div>
                <div id="securecontext" class="error">
                    <p>
                        Sorry, but password protection only works over a secure connection. Please load this page via HTTPS.
                    </p>
                </div>
                <div id="nocrypto" class="error">
                    <p>
                        Your web browser appears to be outdated. Please visit this page using a modern browser.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div id="attribution">
        Protected by <a href="https://www.maxlaumeister.com/pagecrypt/">PageCrypt</a>
    </div>
    <script>
    (function() {

        var pl = "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";
        
        var submitPass = document.getElementById('submitPass');
        var passEl = document.getElementById('pass');
        var invalidPassEl = document.getElementById('invalidPass');
        var trycatcherror = document.getElementById('trycatcherror');
        var successEl = document.getElementById('success');
        var contentFrame = document.getElementById('contentFrame');
        
        // Sanity checks

        if (pl === "") {
            submitPass.disabled = true;
            passEl.disabled = true;
            alert("This page is meant to be used with the encryption tool. It doesn't work standalone.");
            return;
        }

        if (!isSecureContext) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#securecontext").style.display = "block";
            return;
        }

        if (!crypto.subtle) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#nocrypto").style.display = "block";
            return;
        }
        
        function str2ab(str) {
            var ustr = atob(str);
            var buf = new ArrayBuffer(ustr.length);
            var bufView = new Uint8Array(buf);
            for (var i=0, strLen=ustr.length; i < strLen; i++) {
                bufView[i] = ustr.charCodeAt(i);
            }
            return bufView;
        }

        async function deriveKey(salt, password) {
            const encoder = new TextEncoder()
            const baseKey = await crypto.subtle.importKey(
                'raw',
                encoder.encode(password),
                'PBKDF2',
                false,
                ['deriveKey'],
            )
            return await crypto.subtle.deriveKey(
                { name: 'PBKDF2', salt, iterations: 100000, hash: 'SHA-256' },
                baseKey,
                { name: 'AES-GCM', length: 256 },
                true,
                ['decrypt'],
            )
        }
        
        async function doSubmit(evt) {
            submitPass.disabled = true;
            passEl.disabled = true;

            let iv, ciphertext, key;
            
            try {
                var unencodedPl = str2ab(pl);

                const salt = unencodedPl.slice(0, 32)
                iv = unencodedPl.slice(32, 32 + 16)
                ciphertext = unencodedPl.slice(32 + 16)

                key = await deriveKey(salt, passEl.value);
            } catch (e) {
                trycatcherror.style.display = "inline";
                console.error(e);
                return;
            }

            try {
                const decryptedArray = new Uint8Array(
                    await crypto.subtle.decrypt({ name: 'AES-GCM', iv }, key, ciphertext)
                );

                let decrypted = new TextDecoder().decode(decryptedArray);

                if (decrypted === "") throw "No data returned";

                const basestr = '<base href="." target="_top">';
                const anchorfixstr = `
                    <script>
                        Array.from(document.links).forEach((anchor) => {
                            const href = anchor.getAttribute("href");
                            if (href.startsWith("#")) {
                                anchor.addEventListener("click", function(e) {
                                    e.preventDefault();
                                    const targetId = this.getAttribute("href").substring(1);
                                    const targetEl = document.getElementById(targetId);
                                    targetEl.scrollIntoView();
                                });
                            }
                        });
                    <\/script>
                `;
                
                // Set default iframe link targets to _top so all links break out of the iframe
                if (decrypted.includes("<head>")) decrypted = decrypted.replace("<head>", "<head>" + basestr);
                else if (decrypted.includes("<!DOCTYPE html>")) decrypted = decrypted.replace("<!DOCTYPE html>", "<!DOCTYPE html>" + basestr);
                else decrypted = basestr + decrypted;

                // Fix fragment links
                if (decrypted.includes("</body>")) decrypted = decrypted.replace("</body>", anchorfixstr + '</body>');
                else if (decrypted.includes("</html>")) decrypted = decrypted.replace("</html>", anchorfixstr + '</html>');
                else decrypted = decrypted + anchorfixstr;
                
                contentFrame.srcdoc = decrypted;
                
                successEl.style.display = "inline";
                setTimeout(function() {
                    dialogWrap.style.display = "none";
                }, 1000);
            } catch (e) {
                invalidPassEl.style.display = "inline";
                passEl.value = "";
                submitPass.disabled = false;
                passEl.disabled = false;
                console.error(e);
                return;
            }
        }
        
        submitPass.onclick = doSubmit;
        passEl.onkeypress = function(e){
            if (!e) e = window.event;
            var keyCode = e.keyCode || e.which;
            invalidPassEl.style.display = "none";
            if (keyCode == '13'){
              // Enter pressed
              doSubmit();
              return false;
            }
        }
    })();
    </script>
  </body>
</html>
